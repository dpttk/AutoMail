---
- hosts: all
  tasks:
  - name: Update and upgrade apt packages
    become: true
    apt:
      upgrade: yes
      update_cache: yes
      cache_valid_time: 86400 #One day

  - name: Ensure apache is installed.
    become: yes
    become_method: sudo
    apt: 
      name: apache2
      state: latest

  - name: Ensure apache is passing ufw.
    become: yes
    become_method: sudo
    community.general.ufw: 
      rule: allow
      name: Apache
